<% if block.block_type.present? %>
  <%= render "blocks/#{block.block_type}/form", block: block %>
<% else %>
  <%= form_for(block, remote: true) do |f| %>
    <!-- MODAL HEADER -->
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <h4 class="modal-title">
        <%= block.block_type.capitalize if block.block_type.present? %> Block
      </h4>
    </div>

    <!-- MODAL HIDDEN FIELDS -->
    <% if action_name == 'new' && params[:page_id].present? %>
      <input type="hidden" value="<%= params[:page_id].to_i %>" name="block[page_id]">
      <input type="hidden" value="<%= @current_website.id %>" name="block[website_id]">
      <input type="hidden" value="<%= block.block_type %>" name="block[block_type]">
      <input type="hidden" value="<%= block.id %>" name="block[id]">
    <% end %>

    <!-- MODAL BODY -->
    <div class="modal-body">

      <% if !block.block_type.present? %>
        <div class="row">
          <div class="col-sm-12 text-center">
            <% Block::TOP_LEVEL_BLOCKS.each do |block_type|%>
              <%= link_to block_type.titleize, edit_block_path(block, {block_type: block_type, page_id: params[:page_id]}), class: 'btn btn-primary', remote: true %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
<% end %>
