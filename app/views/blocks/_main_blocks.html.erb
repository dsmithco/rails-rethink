<div id='blocks'>
  <style media="screen">
    .block-container {
      margin-bottom: 24px;
      background-color: #fff;
      border: 0px solid transparent;
      border-radius: 2px;
      -webkit-box-shadow: 0 1px 1px rgba(0,0,0,0.35);
      box-shadow: 0 1px 1px rgba(0,0,0,0.35);
      overflow: hidden;
    }
  </style>
  <% blocks.each do |block| %>
    <div id="<%= dom_id(block) %>">
      <h2 class="block-title">
        <%= block.name %>
        <%= link_to 'edit', edit_block_path(block), remote: true, class: 'btn btn-primary inverse btn-sm' if can? :update, block  %>
      </h2>
      <div class="row">
        <div class="col-sm-12">
          <p class="text-center">
            <%= block.about %>
          </p>
          <div class="row">
            <% block.blocks.try(:each) do |sub_block| %>
              <div class="col-sm-<%= ((12 / block.blocks.count).to_f).ceil%>">
                <div class="block-container">
                  <%= render 'blocks/block', block: sub_block %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
