<div>
  <div class="">
    <div class="form-group">
      <h3>
        Blocks <%= link_to 'New Block', new_block_path, remote: true, class: 'btn btn-success' %>
      </h3>
      <table class="table table-striped">
        <thead>
          <tr>
            <th>
              ID
            </th>
            <th>
              Title
            </th>
            <th>
              Type
            </th>
            <th>
              Position
            </th>
            <th>
              Location
            </th>
            <th>
              Front
            </th>
            <th>

            </th>
          </tr>
        </thead>
        <tbody>
          <% @page.website.blocks.each do |block| %>
            <tr id="block_<%=block.id%>">
              <td>
                <%= block.id %>
              </td>
              <td>
                <%= block.name || '--' %>
              </td>
              <td>
                <%= block.block_type %>
              </td>
              <td>
                <%= block.position %>
              </td>
              <td>
                <%= block.location %>
              </td>
              <td>
                <%= "<i class='fa fa-star'></i>".html_safe if block.front_page %>
              </td>
              <td class="text-right">
                <%= link_to 'Edit', edit_block_path(block), remote: true, class: 'btn btn-sm btn-primary' %>
                <%= link_to 'Add to page', "/pages/#{@page.id}/add_block/#{block.id}", method: :put, remote: true, data: {disable_with:'loading...'},class: 'btn btn-sm btn-success' if !@page.block_ids.include?(block.id)%>
                <%= link_to 'Remove from page', "/pages/#{@page.id}/remove_block/#{block.id}", method: :put, remote: true, data: {disable_with:'loading...'},class: 'btn btn-sm btn-danger' if @page.block_ids.include?(block.id)%>
                <%= link_to 'Remove', block_path(block), remote: true, method: :delete, data: {confirm: "Are you sure you want to delete the block #{block.name}"}, class: 'btn btn-sm btn-danger' %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>

</div>
